<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{title}} â€” ZAKKI</title>
  <meta name="description" content="{{description}}" />
  <meta name="author" content="ZAKI" />

  <!-- OG/Twitterï¼ˆJSã§{{}}ã‚’åŸ‹ã‚ã¾ã™ï¼‰ -->
  <meta property="og:title" content="{{title}} â€” ZAKKI" />
  <meta property="og:description" content="{{description}}" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="{{url}}" />
  <meta property="og:site_name" content="ZAKKI" />
  <meta property="og:image" content="/ogimages/{{slug}}.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{title}} â€” ZAKKI" />
  <meta name="twitter:description" content="{{description}}" />
  <meta name="twitter:image" content="/ogimages/{{slug}}.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="/favicon.png" />

  <style>
    /* ====== Tokens (Neon Noire) ====== */
    :root{
      --bg-1:#1a0f1f;  /* æš—ã„ç´« */
      --bg-2:#0f1b2e;  /* ç¾¤é’ */
      --fg:#f5f7ff;    /* æœ¬æ–‡ */
      --muted:#b6bcd3; /* è£œåŠ© */
      --accent:#18e0ff;       /* ã‚·ã‚¢ãƒ³ */
      --accent-warm:#ffa62b;  /* ã‚ªãƒ¬ãƒ³ã‚¸ */
      --card:rgba(18,20,36,0.78);
      --border:#2b3658;
      --shadow:0 18px 40px rgba(0,0,0,.5);
      --radius:16px; --radius-sm:12px; --maxw:860px;
      --code-bg:#0c1f3f; --code-bd:#2a4b7f;
      --chip-research:#8bb6ff; --chip-creative:#f2a65a; --chip-bridge:#9fd3c7; --chip-career:#c8a1ff; --chip-misc:#a7bfdc;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter, "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif; color:var(--fg);
      background:linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 100%);
      background-attachment:fixed; line-height:1.85; letter-spacing:.2px}
    a{color:var(--accent); text-decoration:none} a:hover{text-decoration:underline}

    /* ====== Header / Crumbs ====== */
    header{position:sticky; top:0; z-index:10; backdrop-filter:blur(10px);
      background:linear-gradient(180deg, rgba(10,10,22,.75), rgba(10,10,22,.4)); border-bottom:1px solid rgba(255,255,255,.08)}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:0 20px}
    .nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{font-family:'Audiowide', sans-serif; letter-spacing:.06em; font-size:20px}
    .crumbs{font-size:13px; color:var(--muted)}
    .crumbs a{color:var(--muted)}

    /* ====== Hero ====== */
    .hero{position:relative; overflow:hidden}
    .hero::before{content:""; position:absolute; inset:0; pointer-events:none; z-index:-1;
      background:radial-gradient(800px 420px at 50% 35%, rgba(255,255,255,.08) 0%, transparent 70%)}
    .title{font-family:'Audiowide', sans-serif; font-weight:400; font-size:clamp(28px, 6.5vw, 58px); line-height:1.05; margin:12px 0 6px; letter-spacing:.06em; color:var(--accent-warm);
      text-shadow:0 0 22px rgba(255,166,43,.28), 0 3px 0 rgba(0,0,0,.45)}
    .subtitle{margin:6px 0 0; font-family:Inter, "Noto Sans JP", sans-serif; font-weight:400; font-size:clamp(14px, 2.6vw, 16px); letter-spacing:.05em; color:var(--muted)}

    .meta{display:flex; gap:12px; flex-wrap:wrap; align-items:center; color:var(--muted); font-size:13px; margin-top:8px}
    .chips{display:flex; gap:8px; flex-wrap:wrap}
    .chip{padding:6px 10px; border-radius:999px; font-size:12px; font-weight:600; background:rgba(255,255,255,.04); border:1px solid currentColor; color:currentColor}
    .chip[data-t="research"]{color:var(--chip-research)}
    .chip[data-t="creative"]{color:var(--chip-creative)}
    .chip[data-t="bridge"]{color:var(--chip-bridge)}
    .chip[data-t="career"]{color:var(--chip-career)}
    .chip[data-t="misc"]{color:var(--chip-misc)}

    /* ====== Article ====== */
    article{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:22px; margin:18px 0 28px}
    article h2{font-size:24px; margin:26px 0 10px; color:#eaf1ff; font-weight:600}
    article h3{font-size:18px; margin:20px 0 8px; color:#eaf1ff; font-weight:600}
    article p{margin:.8em 0}
    article ul, article ol{padding-left:1.5em}
    blockquote{margin:14px 0; padding:10px 14px; border-left:3px solid var(--accent); background:rgba(255,255,255,.06); border-radius:0 var(--radius-sm) var(--radius-sm) 0}

    figure{margin:16px 0}
    figure img{max-width:100%; border-radius:12px; border:1px solid var(--border); box-shadow:var(--shadow)}
    figcaption{font-size:13px; color:var(--muted); margin-top:6px}

    .tablewrap{overflow:auto; border:1px solid var(--border); border-radius:12px; margin:12px 0}
    table{width:100%; border-collapse:collapse; min-width:560px}
    th,td{padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.08)}
    thead th{background:rgba(255,255,255,.06); text-align:left}

    pre{background:var(--code-bg); border:1px solid var(--code-bd); border-radius:12px; padding:14px; overflow:auto; position:relative}
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    .copy{position:absolute; top:8px; right:8px; font-size:12px; background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.25); padding:4px 8px; border-radius:8px; cursor:pointer}

    .callout{border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06); border-radius:12px; padding:12px 14px; margin:14px 0}
    .callout.info{border-color:#5f8ec4}
    .callout.warn{border-color:#f2a65a}
    .callout.success{border-color:#76b6a7}

    .toc{background:rgba(255,255,255,.05); border:1px dashed rgba(255,255,255,.18); border-radius:12px; padding:14px; margin:14px 0}
    .toc h3{margin:0 0 8px; font-size:14px; color:#eaf1ff}
    .toc ul{list-style:none; margin:0; padding:0}
    .toc li{margin:6px 0}

    .post-end{display:grid; gap:16px}
    @media(min-width:860px){ .post-end{grid-template-columns: 1fr 1fr} }
    .author{display:flex; gap:12px; align-items:flex-start; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.15); border-radius:12px; padding:14px}
    .avatar{width:56px; height:56px; border-radius:999px; background:linear-gradient(135deg, #18e0ff, #0f1b2e); border:2px solid rgba(255,255,255,.2); display:flex; align-items:center; justify-content:center; font-weight:800}
    .share{background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.15); border-radius:12px; padding:14px}
    .share a{margin-right:10px}

    footer{margin:22px 0 40px; color:var(--muted); font-size:13px; text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand"><a href="/" style="color:var(--fg); text-decoration:none">ZAKKI</a></div>
      <nav class="crumbs">
        <a href="/">Home</a> ï¼ <a href="/categories/{{category}}">{{categoryLabel}}</a> ï¼ <span>{{title}}</span>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Hero -->
    <section class="hero" style="padding:28px 0 8px">
      <h1 class="title">{{title}}</h1>
      <h2 class="subtitle">{{subtitle}}</h2>
      <div class="meta">
        <span>ğŸ—“ {{date}}</span>
        <span>Â·</span>
        <span>â± èª­äº†ç›®å®‰ï¼š{{readingTime}}åˆ†</span>
        <span>Â·</span>
        <span class="chip" data-t="{{category}}">{{categoryLabel}}</span>
        <div class="chips">
          <span class="chip" data-t="research">{{tag1}}</span>
          <span class="chip" data-t="misc">{{tag2}}</span>
        </div>
      </div>
    </section>

    <!-- TOC -->
    <aside class="toc" id="toc">
      <h3>ç›®æ¬¡</h3>
      <ul></ul>
    </aside>

    <!-- Article -->
    <article id="post">
      <h2>ã¯ã˜ã‚ã«</h2>
      <p>ã“ã®è¨˜äº‹ã§ã¯ã€{{shortIntro}}ã€‚</p>

      <h2>èƒŒæ™¯</h2>
      <p>{{background}}</p>

      <h2>æ–¹æ³• / æ‰‹é †</h2>
      <p>{{methodsIntro}}</p>
      <ol>
        <li>{{step1}}</li>
        <li>{{step2}}</li>
        <li>{{step3}}</li>
      </ol>

      <h3>ã‚³ãƒ¼ãƒ‰ä¾‹</h3>
      <pre><button class="copy" data-target="code-1">copy</button><code id="code-1">python
import numpy as np
print("Hello ZAKKI")
</code></pre>

      <h2>çµæœ / è€ƒå¯Ÿ</h2>
      <p>{{findings}}</p>
      <blockquote>ãƒ¡ãƒ¢ï¼šçµè«–ã‚’å…ˆã«æ›¸ã â†’ æ ¹æ‹  â†’ ä¾‹ â†’ ä½™ç™½ï¼ˆæ¬¡ã®èª²é¡Œï¼‰ã€‚</blockquote>

      <figure>
        <img src="{{imageUrl}}" alt="{{imageAlt}}" />
        <figcaption>{{imageCaption}}</figcaption>
      </figure>

      <div class="tablewrap">
        <table>
          <thead>
            <tr><th>é …ç›®</th><th>å€¤</th><th>ãƒ¡ãƒ¢</th></tr>
          </thead>
          <tbody>
            <tr><td>A</td><td>0.82</td><td>ä¾‹ï¼šCVå¹³å‡RÂ²</td></tr>
            <tr><td>B</td><td>Â±0.04</td><td>ä¾‹ï¼šæ¨™æº–åå·®</td></tr>
          </tbody>
        </table>
      </div>

      <h2>ã¾ã¨ã‚</h2>
      <ul>
        <li>{{summary1}}</li>
        <li>{{summary2}}</li>
        <li>{{summary3}}</li>
      </ul>

      <div class="callout info">ğŸ’¡ æ¬¡ã«èª­ã‚€ï¼š<a href="{{related1url}}">{{related1}}</a></div>
      <div class="callout warn">âš  æ³¨æ„ç‚¹ï¼š{{caution}}</div>
      <div class="callout success">âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼š<a href="{{assetUrl}}">{{assetName}}</a></div>
    </article>

    <!-- Post end -->
    <section class="post-end">
      <div class="author">
        <div class="avatar" aria-hidden="true">ZK</div>
        <div>
          <strong>ZAKI</strong>
          <p class="muted">äº¬éƒ½å¤§å­¦å¤§å­¦é™¢ï¼ç¥çµŒå¤‰æ€§ç–¾æ‚£ã®åŒ»ç”¨ç”»åƒè§£æï¼ˆNDM/ESM/SuStaInï¼‰ã€‚U26å¥³å­ãƒ–ãƒªãƒƒã‚¸æ—¥æœ¬ä»£è¡¨ã€‚å‰µä½œã¯ãƒãƒ€ãƒŸã‚¹/RPG/ãƒ­ã‚´ãªã©ã€‚</p>
          <p><a href="/about">ã‚‚ã£ã¨è¦‹ã‚‹ â†’</a></p>
        </div>
      </div>
      <div class="share">
        <strong>Share</strong>
        <p>
          <a href="https://twitter.com/intent/tweet?text={{title}}&url={{url}}" target="_blank" rel="noopener">Xã«å…±æœ‰</a>
          <a href="https://b.hatena.ne.jp/add?mode=confirm&url={{url}}&title={{title}}" target="_blank" rel="noopener">ã¯ã¦ãƒ–</a>
          <a href="mailto:?subject={{title}}&body={{url}}">ãƒ¡ãƒ¼ãƒ«</a>
        </p>
      </div>
    </section>

    <footer>
      <p>Â© 2025 ZAKKI â€” <a href="/">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a></p>
    </footer>
  </main>

  <script>
    // ---- ãƒ—ãƒ¬ãƒ¼ãƒ³HTMLã§ã‚‚å‹•ãç°¡æ˜“{{}}ç½®æ› ----
    const POST = {
      title: 'Network Diffusion Modelã§ã¿ã‚‹ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…ã®èç¸®é€²è¡Œ',
      description: 'è„³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®æ‹¡æ•£ãƒ¢ãƒ‡ãƒ«ã§PDã®èç¸®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’èª­ã‚€å®Ÿé¨“ãƒ¡ãƒ¢',
      url: window.location.href,
      slug: 'ndm-parkinson',
      category: 'research',
      categoryLabel: 'ç ”ç©¶',
      date: '2025-10-12',
      readingTime: '7',
      subtitle: 'æ‹¡æ•£å®šæ•°ãƒ»çµåˆé‡ã¿ãƒ»å¢ƒç•Œæ¡ä»¶ã®æ„Ÿåº¦ã‚’å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§æ¤œè¨¼',
      tag1: 'NDM',
      tag2: 'Neuroimaging',
      shortIntro: 'NDMã®å‰æãƒ»å®Ÿè£…ãƒ»è©•ä¾¡ã®è¦ç‚¹ã‚’æ•´ç†ã—ã¾ã™',
      background: 'NDMã¯é€£çµè¡Œåˆ—ã«å¯¾ã™ã‚‹ç†±æ–¹ç¨‹å¼é¡ä¼¼ã®æ™‚é–“ç™ºå±•ã‚’ä»®å®šã—â€¦',
      methodsIntro: 'ä»Šå›ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ©ãƒ—ãƒ©ã‚·ã‚¢ãƒ³æ‹¡æ•£ã‚’ç”¨ã„ã€çµåˆã¯æ©Ÿèƒ½/æ§‹é€ connectomeã§â€¦',
      step1: 'å‰å‡¦ç†ï¼šZ-scoreæ­£è¦åŒ–ã¨æ¥ç¶šè¡Œåˆ—ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°',
      step2: 'ãƒ‘ãƒ©ãƒ¡ã‚¿æ¢ç´¢ï¼šÎ²ã®ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã¨CV',
      step3: 'è©•ä¾¡ï¼šäºˆæ¸¬èç¸®ãƒãƒƒãƒ—ã¨è¦³æ¸¬ã®ç›¸é–¢',
      findings: 'å°æ¨™æœ¬ã§ã‚‚Î²ã®å®‰å®šåŸŸãŒè¦‹ãˆã‚‹ã€‚åŠçƒéå¯¾ç§°ã«é–¢ã™ã‚‹è¿½åŠ æ¤œè¨ãŒå¿…è¦ã€‚',
      imageUrl: '/assets/images/sample-ndm.png',
      imageAlt: 'NDMã®æ¦‚å¿µå›³',
      imageCaption: 'Fig.1 æ‹¡æ•£ã®æ™‚é–“ç™ºå±•ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰',
      summary1: 'Î²ã¯0.015ã€œ0.03ã§æŒ‡æ¨™ãŒå®‰å®š',
      summary2: 'æ§‹é€ connectomeã®ã»ã†ãŒèª¬æ˜åŠ›ãŒé«˜ã„å‚¾å‘',
      summary3: 'åŠçƒå·®ã¨åŸºåº•æ ¸å‘¨è¾ºã®ä¾‹å¤–å€¤ã¯è¿½åŠ åˆ†æã¸',
      related1: 'ENIGMA toolboxã®å¯è¦–åŒ–ï¼šç½ ã¨å›é¿ãƒ¡ãƒ¢',
      related1url: '/article/enigma-visualization.html',
      caution: 'æ‚£è€…/å¯¾ç…§ã®å¹´é½¢åˆ†å¸ƒã‚’å®Œå…¨ä¸€è‡´ã•ã›ã¦ã„ãªã„ãŸã‚ã€äº¤çµ¡ã®å¯èƒ½æ€§ã‚ã‚Š',
      assetUrl: '/assets/files/ndm-notes.pdf',
      assetName: 'è£œè¶³PDFï¼ˆå®Ÿé¨“ãƒ¡ãƒ¢ï¼‰'
    };

    function replacePlaceholders(root=document){
      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null);
      const texts = [];
      while(walker.nextNode()) texts.push(walker.currentNode);
      texts.forEach(node => { node.nodeValue = node.nodeValue.replace(/{{(\w+)}}/g, (_,k)=> POST[k] ?? ''); });
      document.querySelectorAll('meta, link').forEach(el => {
        for(const attr of ['content','href']){
          if(el.hasAttribute(attr)){
            el.setAttribute(attr, el.getAttribute(attr).replace(/{{(\w+)}}/g, (_,k)=> POST[k] ?? ''));
          }
        }
      });
      const cat = document.querySelector('.crumbs a[href^="/categories/"]');
      if(cat) cat.setAttribute('href', `/categories/${POST.category}`);
    }
    replacePlaceholders();

    // ---- TOC è‡ªå‹•ç”Ÿæˆï¼ˆh2/h3ï¼‰ ----
    (function(){
      const toc = document.querySelector('#toc ul');
      const headings = document.querySelectorAll('#post h2, #post h3');
      if(!toc || headings.length===0) return;
      headings.forEach(h => {
        if(!h.id){ h.id = h.textContent.trim().replace(/\s+/g,'-').toLowerCase() }
        const li = document.createElement('li');
        li.style.marginLeft = h.tagName==='H3' ? '14px' : '0';
        const a = document.createElement('a'); a.href = `#${h.id}`; a.textContent = h.textContent;
        li.appendChild(a); toc.appendChild(li);
      });
    })();

    // ---- ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ ----
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.copy'); if(!btn) return;
      const id = btn.getAttribute('data-target');
      const code = document.getElementById(id); if(!code) return;
      const text = code.innerText;
      if(navigator.clipboard){
        navigator.clipboard.writeText(text).then(()=>{ btn.textContent='copied!'; setTimeout(()=>btn.textContent='copy', 1200); });
      } else {
        const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); btn.textContent='copied!'; } catch(_){}
        document.body.removeChild(ta); setTimeout(()=>btn.textContent='copy', 1200);
      }
    });
  </script>
</body>
</html>
